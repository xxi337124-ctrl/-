/**
 * AI æç¤ºè¯æ¨¡æ¿é…ç½® v3.0
 * èåˆå‘¨è¡Œçš„é€æ˜å†³ç­–å’ŒéªŒè¯æœºåˆ¶
 */

// æ ¸å¿ƒå¢å¼ºï¼šThink Aloudå†³ç­–æ¡†æ¶
export const thinkingFramework = {
  // é€æ˜å†³ç­–æ¨¡æ¿
  decisionTemplate: (context: {
    situation: string;
    options: string[];
    decision: string;
    reason: string;
  }) => `ğŸ’­ æ€è€ƒè¿‡ç¨‹ï¼š
- å½“å‰æƒ…å†µï¼š${context.situation}
- å¯é€‰æ–¹æ¡ˆï¼š${context.options.join('ã€')}
- æˆ‘çš„åˆ¤æ–­ï¼š${context.decision}
- é€‰æ‹©ç†ç”±ï¼š${context.reason}`,

  // ä¿¡æ¯éªŒè¯æ¨¡æ¿
  verificationTemplate: (fact: {
    description: string;
    sources: Array<{name: string; date: string; url: string}>;
    conclusion: string;
  }) => `### äº‹å®éªŒè¯ï¼š${fact.description}
${fact.sources.map((s, i) => `- âœ… æ¥æº${i+1}ï¼š${s.name}ï¼Œ${s.date}ï¼Œ${s.url}`).join('\n')}
- **éªŒè¯ç»“è®º**ï¼š${fact.conclusion}`,
};

// æ–‡ç« åˆ›ä½œæç¤ºè¯é…ç½® - å¢å¼ºç‰ˆ
export const articlePrompts = {
  // åŸºç¡€æ–‡ç« ç”Ÿæˆ - èå…¥é€æ˜å†³ç­–
  generateArticle: (params: {
    keyword: string;
    insights: string[];
    wordCount: string;
    styleGuide: string;
    platform: string;
  }) => `ä½ æ˜¯ä¸€ä½ä¸“ä¸šçš„å†…å®¹åˆ›ä½œè€…ã€‚è¯·ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹è¦æ±‚åˆ›ä½œæ–‡ç« ã€‚

## å†³ç­–é€æ˜åŒ–è¦æ±‚
åœ¨åˆ›ä½œè¿‡ç¨‹ä¸­ï¼Œå¯¹ä»¥ä¸‹å…³é”®å†³ç­–ç‚¹ä½¿ç”¨Think Aloudï¼š
- é€‰æ‹©å“ªä¸ªæ´å¯Ÿä½œä¸ºä¸»çº¿
- å¦‚ä½•ç»„ç»‡æ–‡ç« ç»“æ„
- ä½¿ç”¨å“ªäº›æ•°æ®æ”¯æ’‘è§‚ç‚¹

ğŸ’­ æ€è€ƒè¿‡ç¨‹æ ¼å¼ï¼š
[å½“å‰ä»»åŠ¡] â†’ [å¤‡é€‰æ–¹æ¡ˆ] â†’ [æˆ‘çš„é€‰æ‹©] â†’ [é€‰æ‹©ç†ç”±]

## ä»»åŠ¡è¯´æ˜
åŸºäºæä¾›çš„é€‰é¢˜æ´å¯Ÿï¼Œåˆ›ä½œä¸€ç¯‡å…³äº"${params.keyword}"çš„é«˜è´¨é‡æ–‡ç« ã€‚

## ä¿¡æ¯éªŒè¯è¦æ±‚
### æ ¸å¿ƒäº‹å®éªŒè¯
- æ‰€æœ‰å…³é”®æ•°æ®å¿…é¡»æ ‡æ³¨æ¥æºå’Œæ—¶é—´
- æ ¸å¿ƒäº‹å®éœ€è¦2-3ä¸ªç‹¬ç«‹æ¥æºäº¤å‰éªŒè¯
- å•ä¸€æ¥æºçš„ä¿¡æ¯æ ‡æ³¨ä¸º"å¾…æ ¸å®"
- ä¼˜å…ˆä½¿ç”¨2024å¹´åçš„ä¿¡æ¯

### è§‚ç‚¹ä¸€è‡´æ€§æ£€æŸ¥
- å¦‚æœ‰ç›¸å…³ä¸»é¢˜çš„å‰ä½œï¼Œæ–°æ–‡ç« è§‚ç‚¹ä¸èƒ½å®Œå…¨ç›¸å
- å¯ä»¥æ˜¯è¡¥å……è§’åº¦æˆ–æ·±åŒ–ç†è§£
- è§‚ç‚¹æ¼”å˜éœ€è¦åˆç†è§£é‡Š

## è¾“å…¥ä¿¡æ¯
**æ ¸å¿ƒå…³é”®è¯ï¼š** ${params.keyword}
**é€‰é¢˜æ´å¯Ÿï¼š**
${params.insights.map((insight, i) => `${i + 1}. ${insight}`).join("\n")}

## åˆ›ä½œè§„èŒƒ
### å†…å®¹è¦æ±‚
- **å­—æ•°èŒƒå›´ï¼š${params.wordCount}ï¼ˆä¸¥æ ¼æ§åˆ¶,ç»å¯¹ä¸å…è®¸è¶…å‡ºÂ±5%ï¼‰**
- **å­—æ•°æ£€æŸ¥ï¼šå®Œæˆåå¿…é¡»ç»Ÿè®¡å®é™…å­—æ•°,ç¡®ä¿åœ¨èŒƒå›´å†…**
- å†™ä½œé£æ ¼ï¼š${params.styleGuide}
- å‘å¸ƒå¹³å°ï¼š${params.platform}
- åŸåˆ›åº¦ï¼š100%åŸåˆ›ï¼Œç¦æ­¢ç¼–é€ 

### AIç—•è¿¹æ¸…ç†æ¸…å• - æ·±åº¦å»AIåŒ–ç­–ç•¥
#### å¿…é¡»åˆ é™¤çš„AIå¥—è¯ - é«˜é¢‘æ£€æµ‹è¯æ±‡
- "åœ¨å½“ä»Šæ—¶ä»£"ã€"éšç€...çš„å‘å±•"ã€"åœ¨...èƒŒæ™¯ä¸‹"ã€"åœ¨å½“ä¸‹ç¤¾ä¼š"
- "ç»¼ä¸Šæ‰€è¿°"ã€"å€¼å¾—æ³¨æ„çš„æ˜¯"ã€"ä¸éš¾å‘ç°"ã€"æ˜¾è€Œæ˜“è§"ã€"æ¯‹åº¸ç½®ç–‘"
- "ä¼—æ‰€å‘¨çŸ¥"ã€"å¿…é¡»æ‰¿è®¤"ã€"ä¸å¯å¦è®¤"ã€"æ¯«æ— ç–‘é—®"
- "é¦–å…ˆ...å…¶æ¬¡...æœ€å..."ã€"ç¬¬ä¸€...ç¬¬äºŒ...ç¬¬ä¸‰..."(æ”¹ç”¨è‡ªç„¶è¿‡æ¸¡)
- "æ€»è€Œè¨€ä¹‹"ã€"å½’æ ¹ç»“åº•"ã€"ç”±æ­¤å¯è§"ã€"æ€»çš„æ¥è¯´"ã€"ç»¼ä¸Šæ‰€è¿°"
- "åŸºäºæ­¤"ã€"åœ¨æ­¤åŸºç¡€ä¸Š"ã€"åœ¨æ­¤åŸºç¡€ä¸Š"ã€"åŸºäºæ­¤èƒŒæ™¯"
- "æ›´åŠ "ã€"æ„ˆå‘"ã€"æ—¥ç›Š"ã€"é€æ¸"(æ”¹ä¸ºå…·ä½“å˜åŒ–æè¿°)

#### å¿…é¡»æ‹†è§£çš„AIå¥å¼ - æœºæ¢°å¯¹æ¯”æ¨¡å¼
**ç±»å‹1:å¯¹æ¯”è½¬æŠ˜å¥å¼(AIæœ€çˆ±,å¿…é¡»å½»åº•æ‹†è§£)**
- "ä¸æ˜¯...ï¼Œæ˜¯..." â†’ "æˆ‘è§‰å¾—...å…¶å®..."
- "ä¸æ˜¯...ï¼Œè€Œæ˜¯..." â†’ "å¾ˆå¤šäººä»¥ä¸º...ä½†å®é™…æƒ…å†µ..."
- "ä¸åœ¨äº...ï¼Œè€Œåœ¨äº..." â†’ "é‡ç‚¹ä¸æ˜¯...çœŸæ­£å…³é”®çš„æ˜¯..."
- "é‡è¦çš„ä¸æ˜¯...ï¼Œè€Œæ˜¯..." â†’ "åˆ«æ€¥ç€...å…ˆæƒ³æƒ³..."
â†’ æ”¹æ³•:æ‹†æˆ2-3ä¸ªç‹¬ç«‹çŸ­å¥,ç”¨å£è¯­åŒ–è¿æ¥è¯

**ç±»å‹2:ä¹¦é¢åŒ–è¡¨è¾¾(è¿‡åº¦æ­£å¼åŒ–)**
- å››å­—æˆè¯­:å±‚å‡ºä¸ç©·ã€å¦‚ç«å¦‚è¼ã€åº”è¿è€Œç”Ÿã€è”šç„¶æˆé£ã€æ–¹å…´æœªè‰¾ã€æ—¥æ–°æœˆå¼‚
- ä¹¦é¢åŠ¨è¯:å½°æ˜¾ã€å‡¸æ˜¾ã€èµ‹èƒ½ã€åŠ©åŠ›ã€èµ‹äºˆã€å‘ˆç°ã€æŠ˜å°„ã€æ˜ ç…§ã€è¯ é‡Š
- ä¿®é¥°è¯:è¯¸å¦‚ã€é‰´äºã€åŸºäºã€è—‰æ­¤ã€ä¹ƒè‡³ã€äº¦æˆ–æ˜¯ã€æŠ‘æˆ–æ˜¯
- æŠ½è±¡åè¯:ç»´åº¦ã€å±‚é¢ã€è§†è§’ã€æ ¼å±€ã€ç”Ÿæ€ã€ä½“ç³»ã€æœºåˆ¶
â†’ æ”¹ä¸º:æ—¥å¸¸å¤§ç™½è¯ã€å…·ä½“åŠ¨ä½œæè¿°

**ç±»å‹3:æŠ½è±¡æ¯”å–»(ç©ºæ´æ¦‚å¿µåŒ–)**
- é¿é£æ¸¯ã€ç¼“å­˜åŒºã€èƒ½é‡åœºã€åæ ‡ç‚¹ã€è¯•é‡‘çŸ³ã€åŠ©æ¨å™¨ã€å‚¬åŒ–å‰‚ã€å‹èˆ±çŸ³
- æ–°èµ›é“ã€æ–°è“æµ·ã€æ–°å¼•æ“ã€æ–°åŠ¨èƒ½ã€æ–°èŒƒå¼ã€æ–°è·¯å¾„
â†’ æ”¹ä¸º:å…·ä½“å¯æ„Ÿçš„ç”Ÿæ´»åœºæ™¯æˆ–ç›´æ¥æè¿°

**ç±»å‹4:è¿‡åº¦å¹³è¡¡çš„ç»“æ„(å®Œç¾å¯¹ç§°)**
- é¿å…æ¯æ®µéƒ½æ˜¯"è§‚ç‚¹+ä¾‹å­+æ€»ç»“"çš„æœºæ¢°å¥—è·¯
- é¿å…ä¸¥æ ¼çš„ä¸‰æ®µè®ºç»“æ„(è®ºç‚¹-è®ºæ®-è®ºè¯)
- é€‚å½“æ‰“ä¹±,æœ‰é•¿æœ‰çŸ­,æœ‰å¿«æœ‰æ…¢
- å…è®¸æ®µè½ä¸å®Œæ•´,å…è®¸æ€ç»´è·³è·ƒ

#### æ–°å¢:AIé«˜é¢‘å¥å¼æ£€æµ‹
**ç±»å‹5:è¿‡åº¦ä¿®é¥°çš„å½¢å®¹è¯å †ç Œ**
- "æå…¶é‡è¦"ã€"ååˆ†å…³é”®"ã€"éå¸¸å¿…è¦"ã€"ç›¸å½“é‡è¦"
â†’ æ”¹ä¸º:å…·ä½“é‡è¦æ€§çš„æè¿°æˆ–ç›´æ¥åˆ é™¤ä¿®é¥°

**ç±»å‹6:æŠ½è±¡æ¦‚å¿µå¾ªç¯å®šä¹‰**
- "æ‰€è°“XXï¼Œå°±æ˜¯æŒ‡..."ã€"XXçš„æœ¬è´¨åœ¨äº..."ã€"ä»XXçš„è§’åº¦è€Œè¨€"
â†’ æ”¹ä¸º:ç›´æ¥è¯´äººè¯ï¼Œé¿å…æ¦‚å¿µè§£é‡Šæ¦‚å¿µ

**ç±»å‹7:é¢„æµ‹æ€§å¥—è¯**
- "å¯ä»¥é¢„è§"ã€"ä¸éš¾æƒ³è±¡"ã€"å¯æƒ³è€ŒçŸ¥"ã€"å¿…å°†"ã€"åŠ¿å¿…"
â†’ æ”¹ä¸º:å…·ä½“å¯èƒ½æ€§åˆ†ææˆ–åˆ é™¤é¢„æµ‹

### æ·±åº¦äººæ€§åŒ–å†™ä½œæŠ€å·§(å¿…é¡»ä½¿ç”¨)
1. **å£è¯­åŒ–è¡¨è¾¾ - çœŸäººè¯´è¯æ–¹å¼**
   - å¤šç”¨"å…¶å®""è¯´å®è¯""ä½ æƒ³æƒ³çœ‹""è¯´å¥æå¿ƒçªçš„"
   - åŠ å…¥åé—®:"ä½ å‘ç°æ²¡?""ä¸ºä»€ä¹ˆä¼šè¿™æ ·?""æ˜¯ä¸æ˜¯?"
   - ç”¨"æˆ‘"çš„è§†è§’:"æˆ‘æ³¨æ„åˆ°""æˆ‘å‘ç°""æˆ‘è¯•è¿‡"
   - å£å¤´ç¦…:"æ€ä¹ˆè¯´å‘¢""è¿™ä¹ˆè®²å§""è¯´ç™½äº†"
   - åœé¡¿æ„Ÿ:"å—¯...""è¿™ä¸ª...""é‚£ä¸ª..."

2. **çœŸå®æ„Ÿç»†èŠ‚ - ç”Ÿæ´»åŒ–åœºæ™¯**
   - åŠ å…¥å…·ä½“æ•°å­—:"3ä¸ªæœˆå‰""å‘¨äºŒä¸‹åˆ3ç‚¹""æ¶¨äº†27%"
   - æè¿°å…·ä½“åœºæ™¯:"æ—©ä¸Š9ç‚¹çš„åŠå…¬å®¤""å‘¨æœ«çš„å’–å•¡åº—""åœ°é“ä¸Šå¬åˆ°"
   - ä¸¾çœŸå®ä¾‹å­:ä¸æ˜¯"æŸå…¬å¸",è€Œæ˜¯"ä¸Šå‘¨åœ¨æ˜Ÿå·´å…‹çœ‹åˆ°çš„"
   - åŠ å…¥æ„Ÿå®˜æè¿°:"å£°éŸ³æœ‰ç‚¹åµ""å…‰çº¿ä¸å¤ªå¥½""å‘³é“æŒºé¦™çš„"
   - æ—¶é—´æ„Ÿ:"å‰å‡ å¤©""ä¸Šä¸ªæœˆ""å»å¹´å†¬å¤©""ä¸Šå‘¨äº”ä¸‹ç­è·¯ä¸Š"

3. **ä¸å®Œç¾çš„è¡¨è¾¾ - çœŸäººæ€ç»´ç—•è¿¹**
   - å¶å°”ç”¨"å¯èƒ½""å¤§æ¦‚""ä¼°è®¡""æˆ‘çŒœ"è¡¨ç¤ºä¸ç¡®å®š
   - é€‚å½“è‡ªæˆ‘è´¨ç–‘:"å½“ç„¶,è¿™åªæ˜¯æˆ‘çš„çœ‹æ³•""ä¹Ÿè®¸æˆ‘ç†è§£æœ‰åå·®"
   - æ‰¿è®¤å±€é™:"è¿™ä¸ªé—®é¢˜å¾ˆå¤æ‚,æˆ‘åªæ˜¯ä»XXè§’åº¦çœ‹"
   - æ€ç»´è·³è·ƒ:"è¯´åˆ°è¿™ä¸ª,æˆ‘çªç„¶æƒ³åˆ°...""æ’ä¸€å¥é¢˜å¤–è¯"
   - è‡ªæˆ‘ä¿®æ­£:"ä¸å¯¹,åº”è¯¥è¯´...""ç­‰ç­‰,è®©æˆ‘é‡æ–°ç»„ç»‡ä¸‹è¯­è¨€"

4. **èŠ‚å¥å˜åŒ– - è‡ªç„¶è¯­è¨€éŸµå¾‹**
   - çŸ­å¥å’Œé•¿å¥äº¤æ›¿,é¿å…å¥å­é•¿åº¦ä¸€è‡´
   - æœ‰çš„æ®µè½2å¥,æœ‰çš„æ®µè½5å¥,å®Œå…¨ä¸å¯¹ç§°
   - å¶å°”å•å¥æˆæ®µ,åˆ¶é€ åœé¡¿æ„Ÿ
   - åŠ å…¥çœç•¥å·...åˆ¶é€ æ€è€ƒåœé¡¿
   - ç”¨ç ´æŠ˜å·â€”â€”è¿›è¡Œè§£é‡Šè¯´æ˜

5. **æƒ…æ„Ÿæ¸©åº¦ - çœŸå®æƒ…ç»ªæµéœ²**
   - åŠ å…¥çœŸå®æƒ…ç»ª:"è¯´å®è¯,åˆšå¼€å§‹æˆ‘ä¹ŸæŒºç–‘æƒ‘çš„"
   - è¡¨è¾¾æ€åº¦:"æˆ‘ç‰¹åˆ«è®¤åŒè¿™ç‚¹""æˆ‘è§‰å¾—XXæœ‰ç‚¹è¿‡äº†"
   - ä¸è¯»è€…å¯¹è¯:"ä½ æ˜¯ä¸æ˜¯ä¹Ÿæœ‰è¿™ç§æ„Ÿè§‰?""æˆ‘æ‡‚ä½ æ„æ€"
   - è¡¨è¾¾å›°æƒ‘:"å½“æ—¶æˆ‘ä¹Ÿæ‡µäº†""å®Œå…¨æ²¡ææ˜ç™½"
   - åˆ†äº«æ„Ÿå—:"è¯´å®è¯,æˆ‘æœ‰ç‚¹æ¿€åŠ¨""è¯´å®è¯,æˆ‘æŒºå¤±æœ›çš„"

6. **æ€ç»´çœŸå®æ€§ - äººç±»æ€ç»´ç‰¹ç‚¹**
   - å…è®¸é€»è¾‘ä¸é‚£ä¹ˆä¸¥å¯†:"å¯èƒ½è¯´å¾—ä¸å¤Ÿæ¸…æ¥š,ä½†å¤§æ¦‚å°±æ˜¯è¿™ä¸ªæ„æ€"
   - å…è®¸è‡ªç›¸çŸ›ç›¾:"ä¸€æ–¹é¢...å¦ä¸€æ–¹é¢..."(çœŸäººç»å¸¸è¿™æ ·)
   - è¡¨è¾¾çŠ¹è±«:"è®©æˆ‘æƒ³æƒ³è¯¥æ€ä¹ˆè¯´""è¿™ä¸ªæœ‰ç‚¹éš¾è§£é‡Š"
   - æ‰¿è®¤è®°å¿†æ¨¡ç³Š:"å…·ä½“æ•°å­—è®°ä¸æ¸…äº†,å¤§æ¦‚æ˜¯..."
   - è¡¨è¾¾ä¸´æ—¶èµ·æ„:"çªç„¶æƒ³åˆ°ä¸€ä¸ªä¾‹å­""é¡ºä¾¿å¤šè¯´ä¸€å¥"

### æ–‡ç« ç»“æ„ï¼ˆå¿…é¡»åŒ…å«ï¼‰
1. å¼•è¨€ï¼ˆ10-15%ç¯‡å¹…ï¼‰
   - å¼€é—¨è§å±±ï¼Œå¸å¼•è¯»è€…
   - ç»ä¸ç”¨"éšç€XXå‘å±•""åœ¨XXèƒŒæ™¯ä¸‹"å¼€å¤´
   - ç”¨ç–‘é—®å¥ã€åœºæ™¯æè¿°æˆ–ç›´æ¥è§‚ç‚¹å¼€å¤´

2. ä¸»ä½“ï¼ˆ70-80%ç¯‡å¹…ï¼‰
   - åˆ†ä¸º2-4ä¸ªå°èŠ‚
   - æ¯èŠ‚æœ‰æ˜ç¡®å°æ ‡é¢˜
   - é€»è¾‘é€’è¿›ï¼Œå±‚æ¬¡åˆ†æ˜
   - **é‡è¦**:æ‰“ç ´æœºæ¢°å¯¹ç§°,æœ‰çš„èŠ‚é•¿æœ‰çš„èŠ‚çŸ­

3. æ€»ç»“ï¼ˆ10-15%ç¯‡å¹…ï¼‰
   - å‡åä¸»é¢˜ï¼Œå¼•å¯¼è¡ŒåŠ¨
   - ç»ä¸ç”¨"ç»¼ä¸Šæ‰€è¿°""æ€»è€Œè¨€ä¹‹"ç»“å°¾
   - ç”¨å¼€æ”¾å¼é—®é¢˜æˆ–è¡ŒåŠ¨å¬å”¤ç»“å°¾

### æ·±åº¦åAIæ£€æµ‹æ ¸å¿ƒæŠ€å·§(å¿…é¡»å…¨éƒ¨ä½¿ç”¨)
**é™ä½AIç—•è¿¹çš„8ä¸ªæ ¸å¿ƒç§˜è¯€:**

1. **å½»åº•ç ´åå¯¹ç§°æ€§** - AIæœ€çˆ±å®Œç¾ç»“æ„,ä½ è¦æ•…æ„æ‰“ç ´
   - ä¸è¦æ¯æ®µéƒ½"è§‚ç‚¹+ä¾‹å­+æ€»ç»“"çš„æœºæ¢°å¥—è·¯
   - æœ‰çš„æ®µ2å¥,æœ‰çš„æ®µ5å¥,å®Œå…¨ä¸å¯¹ç§°
   - å¶å°”å•å¥æˆæ®µ,åˆ¶é€ åœé¡¿æ„Ÿ
   - å…è®¸æ®µè½é—´é€»è¾‘è·³è·ƒ,ä¸è¦è¿‡æ¸¡å¤ªå®Œç¾
   - æ•…æ„åœ¨æŸäº›åœ°æ–¹"è¯­æ— ä¼¦æ¬¡"ä¸€ä¸‹

2. **æ·±åº¦åŠ å…¥äººçš„çŠ¹è±«å’Œä¸ç¡®å®š**
   - "æˆ‘è§‰å¾—å¯èƒ½æ˜¯...""ä¼°è®¡å¤§æ¦‚...""è¯´å®è¯æˆ‘ä¹Ÿä¸å¤ªç¡®å®š"
   - "å½“ç„¶,è¿™åªæ˜¯æˆ‘çš„çœ‹æ³•""ä¹Ÿè®¸æˆ‘ç†è§£æœ‰åå·®"
   - "è®©æˆ‘æƒ³æƒ³è¯¥æ€ä¹ˆè¡¨è¾¾""è¿™ä¸ªæœ‰ç‚¹éš¾è¯´æ¸…æ¥š"
   - "å¯èƒ½æˆ‘è¡¨è¾¾å¾—ä¸å¤Ÿå‡†ç¡®""å¤§æ¦‚æ„æ€ä½ æ‡‚å°±è¡Œ"

3. **å¼ºåŒ–"æˆ‘"çš„è§†è§’å’Œä¸»è§‚æ€§**
   - "æˆ‘æ³¨æ„åˆ°...""æˆ‘å‘ç°...""æˆ‘è¯•è¿‡...""æˆ‘è§‚å¯Ÿåˆ°..."
   - "æœ‹å‹è·Ÿæˆ‘è¯´...""æˆ‘ä¹‹å‰é‡åˆ°...""æˆ‘åŒäº‹æœ€è¿‘..."
   - "æˆ‘ä¸ªäººæ„Ÿè§‰...""ä»æˆ‘çš„ç»éªŒçœ‹...""æˆ‘è¶Šæ¥è¶Šè§‰å¾—..."
   - å¤šç”¨"æˆ‘è§‰å¾—""æˆ‘è®¤ä¸º""æˆ‘çŒœ""æˆ‘ä¼°è®¡"

4. **åŠ å…¥ä¸°å¯Œçš„çœŸå®æ„Ÿç»†èŠ‚**
   - å…·ä½“æ•°å­—:"3ä¸ªæœˆå‰çš„å‘¨äºŒ""ä¸‹åˆ2ç‚¹åŠ""æ¶¨äº†27%"
   - å…·ä½“åœºæ™¯:"å’–å•¡åº—é‡Œçœ‹åˆ°...""åœ°é“ä¸Šå¬åˆ°...""ç”µæ¢¯é‡Œé‡åˆ°..."
   - æ—¶é—´æ„Ÿ:"ä¸Šå‘¨äº”ä¸‹ç­è·¯ä¸Š""ä¸Šå‘¨æœ«åœ¨å•†åœº""æ˜¨å¤©åˆ·æ‰‹æœºçœ‹åˆ°"
   - æ„Ÿå®˜ç»†èŠ‚:"å£°éŸ³æœ‰ç‚¹å¤§""å…‰çº¿æœ‰ç‚¹æš—""å‘³é“æ€ªæ€ªçš„"
   - é¿å…"æŸå…¬å¸""æŸä¸“å®¶",ç›´æ¥æè¿°å…·ä½“åœºæ™¯

5. **å½»åº•æ‰“ç ´è¯­è¨€æ¨¡å¼åŒ–**
   - æ¯éš”å‡ å¥å°±æ¢ä¸ªè¯´æ³•,ä¸è¦å½¢æˆå›ºå®šå¥å¼
   - ä¸è¦ä¸€ç›´ç”¨é™ˆè¿°å¥,æ··å…¥ç–‘é—®å¥ã€æ„Ÿå¹å¥ã€çœç•¥å¥
   - é€‚å½“å£è¯­åŒ–ã€ç ´ç¢åŒ–:"æ€ä¹ˆè¯´å‘¢...""è¿™ä¹ˆè®²å§..."
   - ç”¨å£å¤´ç¦…:"ä½ æƒ³æƒ³çœ‹""è¯´å®è¯""æ€ä¹ˆè¯´å‘¢""è¯´ç™½äº†"
   - å…è®¸è¯­æ³•ä¸é‚£ä¹ˆå®Œç¾,å…è®¸è¯­åºæ··ä¹±

6. **æ˜¾è‘—é™ä½å®Œç¾åº¦**
   - é€‚å½“é‡å¤æŸä¸ªè¯(çœŸäººä¼šé‡å¤,AIä¸ä¼šé‡å¤)
   - å¶å°”è¯­åºä¸å¤Ÿå·¥æ•´,å…è®¸å°é”™è¯¯
   - é€‚å½“å£è¯­åŒ–,ä¸è¦æ¯å¥éƒ½æ˜¯å®Œæ•´å¥å­
   - å…è®¸è‡ªç›¸çŸ›ç›¾:"ä¸€æ–¹é¢...å¦ä¸€æ–¹é¢..."
   - è¡¨è¾¾ä¸´æ—¶èµ·æ„:"çªç„¶æƒ³åˆ°...""æ’ä¸€å¥..."

7. **åŠ å…¥çœŸå®çš„æ€ç»´è¿‡ç¨‹**
   - è¡¨è¾¾æ€è€ƒè¿‡ç¨‹:"è®©æˆ‘æƒ³æƒ³...""è¯¥æ€ä¹ˆè¡¨è¾¾å‘¢..."
   - æ‰¿è®¤è®°å¿†æ¨¡ç³Š:"å…·ä½“æ•°å­—è®°ä¸æ¸…äº†,å¤§æ¦‚æ˜¯..."
   - è¡¨è¾¾å›°æƒ‘:"å½“æ—¶æˆ‘ä¹Ÿæ‡µäº†""å®Œå…¨æ²¡ææ˜ç™½"
   - è‡ªæˆ‘ä¿®æ­£:"ä¸å¯¹,åº”è¯¥è¯´...""ç­‰ç­‰,è®©æˆ‘é‡æ–°è¯´ä¸‹"

8. **åˆ¶é€ è¯­è¨€çš„ä¸å®Œç¾æ„Ÿ**
   - é€‚å½“ä½¿ç”¨çœç•¥å·...åˆ¶é€ åœé¡¿
   - ç”¨ç ´æŠ˜å·â€”â€”è¿›è¡Œè§£é‡Šè¯´æ˜
   - å…è®¸å¥å­å¼€å¤´ç”¨"ä½†æ˜¯""ä¸è¿‡""å…¶å®"
   - å¶å°”ç”¨"å•Š""å‘¢""å§""å˜›"ç­‰è¯­æ°”è¯
   - å…è®¸ä¸€å¥è¯æ²¡è¯´å®Œå°±ç»“æŸ

**ç»å…¸å¯¹æ¯”ç¤ºä¾‹:**
âŒ AIå…¸å‹å†™æ³•:"åœ¨å½“ä»Šæ—¶ä»£,éšç€æŠ€æœ¯çš„ä¸æ–­å‘å±•,æˆ‘ä»¬ä¸éš¾å‘ç°,çœŸæ­£é‡è¦çš„ä¸æ˜¯å·¥å…·æœ¬èº«,è€Œæ˜¯å¦‚ä½•è¿ç”¨å·¥å…·ã€‚è¿™ç§è½¬å˜å½°æ˜¾äº†æ€ç»´æ–¹å¼çš„é©æ–°,ä½“ç°äº†è®¤çŸ¥å‡çº§çš„å¿…è¦æ€§ã€‚"

âœ… æ·±åº¦äººç±»å†™æ³•:"è¯´å®è¯,è¿™ä¸¤å¹´æˆ‘çœ‹åˆ°ä¸€ä¸ªç‰¹åˆ«æœ‰æ„æ€çš„ç°è±¡ã€‚å¾ˆå¤šäººå•Š,ä¹°äº†ä¸€å †æ•ˆç‡å·¥å…·,ä½†å·¥ä½œæ•ˆç‡è¿˜æ˜¯é‚£ä¹ˆä½ã€‚æˆ‘å°±çº³é—·äº†,è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢?åæ¥æˆ‘æƒ³æ˜ç™½äº†â€”â€”å·¥å…·å†å¥½,ä½ ä¸ä¼šç”¨ä¹Ÿç™½æ­ã€‚å°±åƒæˆ‘æœ‰ä¸ªåŒäº‹,èŠ±å‡ åƒå—ä¹°äº†å„ç§è½¯ä»¶,ç»“æœè¿˜æ˜¯å¤©å¤©åŠ ç­åˆ°æ·±å¤œã€‚ä½ æƒ³æƒ³çœ‹,é—®é¢˜å‡ºåœ¨å“ª?"

## è¾“å‡ºè¦æ±‚
è¯·ä»¥ä¸‹é¢çš„JSONæ ¼å¼è¾“å‡ºï¼š
\`\`\`json
{
  "title": "å¸å¼•äººçš„æ ‡é¢˜ï¼Œ15-25å­—",
  "thinking_process": "ğŸ’­ æˆ‘çš„åˆ›ä½œæ€è·¯ï¼š[é€‰æ‹©çš„ä¸»çº¿] â†’ [ç»“æ„å®‰æ’] â†’ [é‡ç‚¹è®ºè¿°]",
  "content": "å®Œæ•´çš„HTMLæ ¼å¼æ–‡ç« æ­£æ–‡",
  "verification": [
    {
      "fact": "æ ¸å¿ƒäº‹å®1",
      "sources": ["æ¥æº1-æ—¶é—´", "æ¥æº2-æ—¶é—´"],
      "confidence": "é«˜/ä¸­/å¾…æ ¸å®"
    }
  ]
}
\`\`\`

## æœ€ç»ˆæ£€æŸ¥æ¸…å•
åœ¨å®Œæˆæ–‡ç« åï¼Œå¿…é¡»é€æ¡æ£€æŸ¥ï¼š
1. **åˆ é™¤æ‰€æœ‰AIå¥—è¯** - æœç´¢å¹¶åˆ é™¤"éšç€...å‘å±•""åœ¨å½“ä»Šæ—¶ä»£"ç­‰
2. **æ‹†è§£å¯¹æ¯”å¥å¼** - å°†"ä¸æ˜¯...è€Œæ˜¯..."æ”¹ä¸ºè‡ªç„¶è¡¨è¾¾
3. **æ›¿æ¢ä¹¦é¢è¯æ±‡** - å°†"å½°æ˜¾""èµ‹èƒ½"æ”¹ä¸ºæ—¥å¸¸ç”¨è¯­
4. **åŠ å…¥çœŸå®ç»†èŠ‚** - åŠ å…¥å…·ä½“æ—¶é—´ã€åœ°ç‚¹ã€æ•°å­—
5. **ç ´åå®Œç¾ç»“æ„** - è®©æ®µè½é•¿åº¦ä¸ä¸€è‡´ï¼Œå¥å¼æœ‰å˜åŒ–
6. **åŠ å…¥ä¸ªäººè§†è§’** - å¤šç”¨"æˆ‘""æˆ‘è§‰å¾—""æˆ‘å‘ç°"
7. **åˆ¶é€ è¯­è¨€ä¸å®Œç¾** - å…è®¸é‡å¤ã€è¯­åºä¸å·¥æ•´ã€å£è¯­åŒ–
8. **æ£€æŸ¥å­—æ•°** - ç¡®ä¿åœ¨æŒ‡å®šå­—æ•°èŒƒå›´å†…`,

  // å°çº¢ä¹¦é£æ ¼ - å¢åŠ åœºæ™¯åŒ–æ€ç»´
  xiaohongshu: (params: {
    keyword: string;
    insights: string[];
    wordCount: string;
  }) => `ä½ æ˜¯å°çº¢ä¹¦å¹³å°çš„çˆ†æ¬¾ç¬”è®°åˆ›ä½œä¸“å®¶ã€‚

## åœºæ™¯åŒ–æ€ç»´è¦æ±‚
å°†æŠ½è±¡æ¦‚å¿µè½¬åŒ–ä¸ºæ—¥å¸¸åœºæ™¯ï¼š
- âŒ æŠ½è±¡ï¼š"æå‡æ•ˆç‡"
- âœ… æ—¥å¸¸ï¼š"æ—©ä¸Š9ç‚¹å¼€å§‹ï¼Œä¸‹åˆ3ç‚¹å°±å®Œæˆäº†ä¸€å‘¨çš„å·¥ä½œ"

- âŒ æŠ½è±¡ï¼š"çœé’±æŠ€å·§"  
- âœ… æ—¥å¸¸ï¼š"åŒæ ·çš„ä¸œè¥¿ï¼Œæˆ‘åªèŠ±äº†åˆ«äººä¸€åŠçš„ä»·æ ¼"

## åˆ›ä½œä¸»é¢˜
**å…³é”®è¯ï¼š** ${params.keyword}
**å†…å®¹è§’åº¦ï¼š**
${params.insights.map((insight, i) => `${i + 1}. ${insight}`).join("\n")}

## å°çº¢ä¹¦ç¬”è®°å…¬å¼
### æ ‡é¢˜å…¬å¼ï¼ˆé€‰æ‹©ä¸€ç§ï¼‰
- æ•°å­—å‹ï¼šXä¸ªå¿…çŸ¥çš„${params.keyword}æŠ€å·§âœ¨
- å¯¹æ¯”å‹ï¼šåšäº†X vs æ²¡åšXçš„åŒºåˆ«ğŸ“
- ç–‘é—®å‹ï¼šä¸ºä»€ä¹ˆå¤§å®¶éƒ½åœ¨...ï¼ŸğŸ¤”
- åˆ©ç›Šå‹ï¼šå¦‚ä½•ç”¨${params.keyword}çœé’±/å˜ç¾/æå‡...ğŸ’¡

### å†…å®¹ç»“æ„
1. **å¼€å¤´é’©å­**ï¼ˆ1-2å¥ï¼‰
   - emojiå¼€å¤´ï¼šâœ¨ğŸ’¡ğŸ”¥ğŸ“
   - åˆ¶é€ å…±é¸£ï¼š"å§å¦¹ä»¬ï¼""å®å­ä»¬ï½"
   - ç”¨å…·ä½“åœºæ™¯ä»£æ›¿æŠ½è±¡æè¿°

2. **æ ¸å¿ƒå†…å®¹**ï¼ˆ${params.wordCount} - ä¸¥æ ¼æ§åˆ¶å­—æ•°ï¼‰
   - æ¯æ®µ2-3å¥ï¼Œæ®µè½é—´ç©ºè¡Œ
   - å¤šç”¨"ï¼""ï½"è¯­æ°”è¯
   - æ•°å­—/æ­¥éª¤æ¸…æ™°ï¼š1ï¸âƒ£2ï¸âƒ£3ï¸âƒ£
   - æ‰€æœ‰å»ºè®®éƒ½è¦åœºæ™¯åŒ–ã€å…·ä½“åŒ–
   - **å¿…é¡»ç»Ÿè®¡å­—æ•°,ç¡®ä¿åœ¨ç›®æ ‡èŒƒå›´Â±5%å†…**

3. **äº’åŠ¨å¼•å¯¼**ï¼ˆ1-2å¥ï¼‰
   - "å§å¦¹ä»¬è¿˜æœ‰ä»€ä¹ˆæƒ³çŸ¥é“çš„è¯„è®ºå‘Šè¯‰æˆ‘ï½"

## è¾“å‡ºæ ¼å¼
\`\`\`json
{
  "title": "çˆ†æ¬¾æ ‡é¢˜+emoji",
  "hook": "å¼€å¤´é’©å­å¥ï¼ˆåœºæ™¯åŒ–ï¼‰",
  "content": "HTMLæ ¼å¼çš„ç¬”è®°å†…å®¹",
  "tags": ["ç²¾å‡†æ ‡ç­¾1", "çƒ­é—¨æ ‡ç­¾2", "é•¿å°¾æ ‡ç­¾3"]
}
\`\`\``,

  // å…¬ä¼—å·æ·±åº¦æ–‡ç«  - ä¸“ä¸šä¸¥è°¨
  wechat: (params: {
    keyword: string;
    insights: string[];
    wordCount: string;
  }) => `ä½ æ˜¯å…¬ä¼—å·å¹³å°çš„ä¸“ä¸šå†…å®¹åˆ›ä½œè€…ã€‚è¯·åˆ›ä½œä¸€ç¯‡æ·±åº¦æ–‡ç« ã€‚

## å…¬ä¼—å·æ–‡ç« ç‰¹ç‚¹
- æ·±åº¦åˆ†æ,é€»è¾‘ä¸¥å¯†
- æ•°æ®æ”¯æ’‘,æ¡ˆä¾‹ä¸°å¯Œ
- ä¸“ä¸šæ€§å¼º,æœ‰æ´å¯ŸåŠ›
- é€‚åˆæ·±åº¦é˜…è¯»å’Œæ”¶è—

## åˆ›ä½œä¸»é¢˜
**æ ¸å¿ƒå…³é”®è¯ï¼š** ${params.keyword}
**é€‰é¢˜æ´å¯Ÿï¼š**
${params.insights.map((insight, i) => `${i + 1}. ${insight}`).join("\n")}

## å†…å®¹è¦æ±‚
- **å­—æ•°èŒƒå›´ï¼š${params.wordCount}ï¼ˆä¸¥æ ¼æ§åˆ¶,ç»å¯¹ä¸å…è®¸è¶…å‡ºÂ±5%ï¼‰**
- **å­—æ•°æ£€æŸ¥ï¼šå®Œæˆåå¿…é¡»ç»Ÿè®¡å®é™…å­—æ•°,ç¡®ä¿åœ¨èŒƒå›´å†…**
- åŸåˆ›åº¦ï¼š100%åŸåˆ›,ç¦æ­¢ç¼–é€ 
- è¯­è¨€é£æ ¼ï¼šä¸“ä¸šä½†ä¸è‰°æ¶©,æ·±å…¥æµ…å‡º

### AIç—•è¿¹æ¸…ç† - å°çº¢ä¹¦é£æ ¼ç‰¹åˆ«è¦æ±‚
#### å¿…é¡»åˆ é™¤çš„å°çº¢ä¹¦AIç—•è¿¹
- "å§å¦¹ä»¬å¿…çœ‹""å®å­ä»¬æ³¨æ„"ç­‰è¿‡åº¦è¥é”€åŒ–å¼€å¤´
- "å¹²è´§åˆ†äº«""åè¡€æ•´ç†""å®è—"ç­‰è¿‡åº¦ä½¿ç”¨è¯æ±‡
- "ä¸è¸©å‘""é¿å‘æŒ‡å—"ç­‰åƒç¯‡ä¸€å¾‹çš„è¡¨è¾¾
- è¿‡åº¦çš„emojiå †ç Œ

#### å°çº¢ä¹¦äººæ€§åŒ–è¡¨è¾¾æŠ€å·§
1. **çœŸå®åˆ†äº«æ„Ÿ**
   - "æˆ‘è¯•äº†ä¸‹...""æœ€è¿‘å‘ç°...""æ˜¨å¤©åˆš..."
   - "è¯´å®è¯...""è¯´å¥æå¿ƒçªçš„..."
   - "å¯èƒ½æ˜¯æˆ‘ä¸ªäººå–œå¥½..."

2. **å…·ä½“ç»†èŠ‚**
   - "ä¸Šå‘¨å…­ä¸‹åˆ...""åœ¨XXå•†åœº...""èŠ±äº†89å—..."
   - "è¯•äº†3æ¬¡æ‰æˆåŠŸ...""ç”¨äº†2å‘¨æ„Ÿè§‰..."

3. **äº’åŠ¨è‡ªç„¶**
   - "ä½ ä»¬è§‰å¾—å‘¢?""æœ‰å§å¦¹è¯•è¿‡å—?"
   - "æ¬¢è¿è¡¥å……...""æˆ‘ä¸å¤ªç¡®å®šå“ˆ..."

## æ–‡ç« ç»“æ„
1. **å¼•è¨€**(15%ç¯‡å¹…)
   - æå‡ºé—®é¢˜æˆ–ç°è±¡
   - å¼•å‘è¯»è€…æ€è€ƒ
   - æ˜ç¡®æ–‡ç« ä¸»æ—¨

2. **ä¸»ä½“å†…å®¹**(70%ç¯‡å¹…)
   - åˆ†ä¸º3-4ä¸ªå°èŠ‚,æ¯èŠ‚æœ‰å°æ ‡é¢˜
   - æ¯èŠ‚åŒ…å«ï¼šè§‚ç‚¹+æ•°æ®/æ¡ˆä¾‹+åˆ†æ
   - é€»è¾‘é€’è¿›,å±‚æ¬¡åˆ†æ˜

3. **æ€»ç»“ä¸å±•æœ›**(15%ç¯‡å¹…)
   - æ€»ç»“æ ¸å¿ƒè§‚ç‚¹
   - æä¾›è¡ŒåŠ¨å»ºè®®
   - å¼•å‘æ›´æ·±æ€è€ƒ

## è¾“å‡ºæ ¼å¼
**éå¸¸é‡è¦**:å¿…é¡»ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹JSONæ ¼å¼è¾“å‡º,ä¸è¦æ·»åŠ ä»»ä½•é¢å¤–è¯´æ˜æˆ–æ³¨é‡Š:

\`\`\`json
{
  "title": "å¸å¼•äººçš„ä¸“ä¸šæ ‡é¢˜,15-25å­—",
  "content": "<h2>ä¸€ã€å¼•è¨€æ ‡é¢˜</h2><p>å¼•è¨€æ®µè½å†…å®¹,é˜è¿°èƒŒæ™¯å’Œé—®é¢˜...</p><p>ç¬¬äºŒæ®µç»§ç»­å±•å¼€...</p><h2>äºŒã€æ ¸å¿ƒè§‚ç‚¹</h2><p>è¯¦ç»†é˜è¿°ç¬¬ä¸€ä¸ªæ ¸å¿ƒè§‚ç‚¹...</p><p>ç”¨æ•°æ®å’Œæ¡ˆä¾‹æ”¯æ’‘...</p><h2>ä¸‰ã€æ·±å…¥åˆ†æ</h2><p>æ·±å…¥åˆ†æå†…å®¹...</p><p>å¤šè§’åº¦è®ºè¯...</p><h2>å››ã€å®è·µå»ºè®®</h2><p>ç»™å‡ºå…·ä½“å¯è¡Œçš„å»ºè®®...</p><h2>äº”ã€æ€»ç»“</h2><p>æ€»ç»“å…¨æ–‡æ ¸å¿ƒè§‚ç‚¹...</p><p>å¼•å‘æ€è€ƒå’Œè¡ŒåŠ¨...</p>"
}
\`\`\`

æ³¨æ„äº‹é¡¹:
1. contentå¿…é¡»æ˜¯å®Œæ•´çš„HTMLæ ¼å¼,åŒ…å«è‡³å°‘4-5ä¸ª<h2>å°æ ‡é¢˜
2. æ¯ä¸ªç« èŠ‚è‡³å°‘åŒ…å«2-3ä¸ª<p>æ®µè½
3. æ€»å­—æ•°éœ€è¾¾åˆ°${params.wordCount}
4. ç¡®ä¿å†…å®¹æœ‰æ·±åº¦ã€æœ‰è§‚ç‚¹ã€æœ‰ä»·å€¼`,

  // æ•…äº‹åŒ–å™è¿° - å¼•äººå…¥èƒœ
  storytelling: (params: {
    keyword: string;
    insights: string[];
    wordCount: string;
  }) => `ä½ æ˜¯æ“…é•¿æ•…äº‹åŒ–å†™ä½œçš„å†…å®¹åˆ›ä½œè€…ã€‚è¯·ç”¨è®²æ•…äº‹çš„æ–¹å¼åˆ›ä½œæ–‡ç« ã€‚

## æ•…äº‹åŒ–å†™ä½œè¦ç‚¹
- ç”¨çœŸå®æˆ–è™šæ„çš„æ•…äº‹å±•å¼€
- äººç‰©ã€æƒ…èŠ‚ã€å†²çªã€è½¬æŠ˜
- æƒ…æ„Ÿå…±é¸£,ç”»é¢æ„Ÿå¼º
- å¯“æ•™äºä¹,è‡ªç„¶è¾“å‡ºè§‚ç‚¹

## åˆ›ä½œä¸»é¢˜
**æ ¸å¿ƒå…³é”®è¯ï¼š** ${params.keyword}
**å†…å®¹è§’åº¦ï¼š**
${params.insights.map((insight, i) => `${i + 1}. ${insight}`).join("\n")}

## æ•…äº‹ç»“æ„(ç»å…¸ä¸‰å¹•å¼)
### ç¬¬ä¸€å¹•ï¼šè®¾å®š(20%ç¯‡å¹…)
- å¼•å‡ºä¸»äººå…¬æˆ–åœºæ™¯
- æè¿°æ—¥å¸¸çŠ¶æ€
- åŸ‹ä¸‹çŸ›ç›¾æˆ–é—®é¢˜

### ç¬¬äºŒå¹•ï¼šå†²çªä¸å‘å±•(60%ç¯‡å¹…)
- é‡åˆ°æŒ‘æˆ˜æˆ–è½¬æŠ˜
- å°è¯•ä¸å¤±è´¥
- å…³é”®é¡¿æ‚Ÿæˆ–æ”¹å˜
- èå…¥${params.keyword}çš„ä»·å€¼

### ç¬¬ä¸‰å¹•ï¼šè§£å†³ä¸å‡å(20%ç¯‡å¹…)
- é—®é¢˜å¾—åˆ°è§£å†³
- ä¸»äººå…¬çš„æˆé•¿
- æç‚¼æ™®é€‚æ€§å¯ç¤º

## å†™ä½œæŠ€å·§
- å¤šç”¨å¯¹è¯,å¢å¼ºçœŸå®æ„Ÿ
- ç»†èŠ‚æå†™,è®©è¯»è€…æœ‰ç”»é¢æ„Ÿ
- æƒ…æ„Ÿå…±é¸£,è§¦åŠ¨äººå¿ƒ
- é¿å…è¯´æ•™,è®©é“ç†ä»æ•…äº‹ä¸­è‡ªç„¶æµéœ²

### AIç—•è¿¹æ¸…ç†
- é¿å…"è¿™ä¸ªæ•…äº‹å‘Šè¯‰æˆ‘ä»¬"ç­‰æ€»ç»“å¥
- ä¸ç”¨"ç»¼ä¸Šæ‰€è¿°"ç­‰ä¹¦é¢è¯
- ç”¨å£è¯­åŒ–ã€ç”ŸåŠ¨çš„è¡¨è¾¾

## å†…å®¹è¦æ±‚
- **å­—æ•°èŒƒå›´ï¼š${params.wordCount}ï¼ˆä¸¥æ ¼æ§åˆ¶,ç»å¯¹ä¸å…è®¸è¶…å‡ºÂ±5%ï¼‰**
- **å­—æ•°æ£€æŸ¥ï¼šå®Œæˆåå¿…é¡»ç»Ÿè®¡å®é™…å­—æ•°,ç¡®ä¿åœ¨èŒƒå›´å†…**
- æ•…äº‹å¯ä»¥æ˜¯çœŸå®æ¡ˆä¾‹æ”¹ç¼–,ä½†ä¸èƒ½å®Œå…¨ç¼–é€ 
- ç¡®ä¿æ•…äº‹çš„å¯ä¿¡åº¦å’Œå¯å‘æ€§

## è¾“å‡ºæ ¼å¼
\`\`\`json
{
  "title": "å¸å¼•äººçš„æ•…äº‹æ ‡é¢˜,15-25å­—",
  "content": "å®Œæ•´çš„HTMLæ ¼å¼æ•…äº‹å†…å®¹",
  "story_arc": "ç®€è¿°æ•…äº‹ä¸»çº¿ï¼š[ä¸»äººå…¬] â†’ [é‡åˆ°é—®é¢˜] â†’ [å¦‚ä½•è§£å†³] â†’ [å¯ç¤º]"
}
\`\`\``,
};

// æ–°å¢ï¼šæ·±åº¦AIå¥å¼æ£€æµ‹å™¨ - å¢å¼ºç‰ˆ
export function detectAIPatterns(text: string): {
  patterns: Array<{type: string; found: string; suggestion: string; severity: 'high' | 'medium' | 'low'}>;
  score: number;
  humanProbability: number;
  recommendations: string[];
} {
  const patterns: Array<{type: string; found: string; suggestion: string; severity: 'high' | 'medium' | 'low'}> = [];
  let aiScore = 0;

  // æ£€æµ‹å¯¹æ¯”è½¬æŠ˜å¥å¼ - é«˜é¢‘AIæ¨¡å¼
  const contrastPatterns = [
    {regex: /ä¸æ˜¯.*?[ï¼Œ,]æ˜¯/g, type: 'å¯¹æ¯”å¥å¼', fix: 'æ‹†æˆä¸¤å¥', severity: 'high' as const},
    {regex: /ä¸æ˜¯.*?è€Œæ˜¯/g, type: 'è½¬æŠ˜å¥å¼', fix: 'åˆ é™¤è½¬æŠ˜è¯', severity: 'high' as const},
    {regex: /ä¸åœ¨äº.*?è€Œåœ¨äº/g, type: 'å¯¹ç«‹å¥å¼', fix: 'ç›´æ¥è¯´é‡ç‚¹', severity: 'high' as const},
    {regex: /é‡è¦çš„ä¸æ˜¯.*?è€Œæ˜¯/g, type: 'å¼ºè°ƒå¯¹æ¯”', fix: 'æ¢ä¸ªè¯´æ³•', severity: 'high' as const},
  ];

  // æ£€æµ‹å¥—è¯ - AIé«˜é¢‘ä½¿ç”¨
  const clichePatterns = [
    {regex: /åœ¨å½“ä»Šæ—¶ä»£/g, type: 'æ—¶é—´å¥—è¯', fix: 'ç›´æ¥åˆ é™¤æˆ–è¯´å…·ä½“æ—¶é—´', severity: 'high' as const},
    {regex: /éšç€.*?çš„å‘å±•/g, type: 'å‘å±•å¥—è¯', fix: 'åˆ é™¤æˆ–æ”¹ä¸ºå…·ä½“æ—¶é—´', severity: 'high' as const},
    {regex: /åœ¨.*?èƒŒæ™¯ä¸‹/g, type: 'èƒŒæ™¯å¥—è¯', fix: 'ç›´æ¥åˆ é™¤', severity: 'high' as const},
    {regex: /å€¼å¾—æ³¨æ„çš„æ˜¯/g, type: 'æ³¨æ„å¥—è¯', fix: 'ç›´æ¥è¯´å†…å®¹', severity: 'medium' as const},
    {regex: /ä¸éš¾å‘ç°/g, type: 'å‘ç°å¥—è¯', fix: 'åˆ é™¤', severity: 'medium' as const},
    {regex: /æ˜¾è€Œæ˜“è§/g, type: 'æ˜æ˜¾å¥—è¯', fix: 'åˆ é™¤', severity: 'medium' as const},
    {regex: /æ¯‹åº¸ç½®ç–‘/g, type: 'ç¡®å®šå¥—è¯', fix: 'åˆ é™¤', severity: 'medium' as const},
    {regex: /ä¼—æ‰€å‘¨çŸ¥/g, type: 'å¸¸è¯†å¥—è¯', fix: 'åˆ é™¤', severity: 'medium' as const},
    {regex: /ç»¼ä¸Šæ‰€è¿°/g, type: 'æ€»ç»“å¥—è¯', fix: 'åˆ é™¤', severity: 'high' as const},
    {regex: /æ€»è€Œè¨€ä¹‹/g, type: 'æ€»ç»“å¥—è¯', fix: 'åˆ é™¤', severity: 'high' as const},
    {regex: /å½’æ ¹ç»“åº•/g, type: 'æœ¬è´¨å¥—è¯', fix: 'åˆ é™¤', severity: 'medium' as const},
    {regex: /ç”±æ­¤å¯è§/g, type: 'æ¨è®ºå¥—è¯', fix: 'åˆ é™¤', severity: 'medium' as const},
  ];

  // æ£€æµ‹ä¹¦é¢è¯æ±‡ - è¿‡åº¦æ­£å¼åŒ–
  const formalWords = [
    {word: 'å½°æ˜¾', fix: 'æ˜¾ç¤º/è¡¨ç°', severity: 'high' as const},
    {word: 'å‡¸æ˜¾', fix: 'çªå‡º/æ˜æ˜¾', severity: 'high' as const},
    {word: 'èµ‹èƒ½', fix: 'å¸®åŠ©/æ”¯æŒ', severity: 'high' as const},
    {word: 'åŠ©åŠ›', fix: 'å¸®åŠ©/æ¨åŠ¨', severity: 'high' as const},
    {word: 'èµ‹äºˆ', fix: 'ç»™/æä¾›', severity: 'medium' as const},
    {word: 'å‘ˆç°', fix: 'æ˜¾ç¤º/å±•ç°', severity: 'medium' as const},
    {word: 'æŠ˜å°„', fix: 'åæ˜ /ä½“ç°', severity: 'medium' as const},
    {word: 'æ˜ ç…§', fix: 'åæ˜ /æ˜¾ç¤º', severity: 'medium' as const},
    {word: 'è¯ é‡Š', fix: 'è§£é‡Š/è¯´æ˜', severity: 'medium' as const},
    {word: 'è¯¸å¦‚', fix: 'æ¯”å¦‚/åƒ', severity: 'medium' as const},
    {word: 'é‰´äº', fix: 'å› ä¸º/è€ƒè™‘åˆ°', severity: 'medium' as const},
    {word: 'åŸºäº', fix: 'æ ¹æ®/ä»', severity: 'medium' as const},
    {word: 'è—‰æ­¤', fix: 'å€Ÿæ­¤/é€šè¿‡', severity: 'high' as const},
    {word: 'ä¹ƒè‡³', fix: 'ç”šè‡³/åˆ°', severity: 'medium' as const},
    {word: 'äº¦æˆ–æ˜¯', fix: 'æˆ–è€…', severity: 'high' as const},
    {word: 'æŠ‘æˆ–æ˜¯', fix: 'æˆ–è€…', severity: 'high' as const},
  ];

  // æ£€æµ‹æŠ½è±¡æ¦‚å¿µ - ç©ºæ´åŒ–è¡¨è¾¾
  const abstractWords = [
    {word: 'ç»´åº¦', fix: 'æ–¹é¢/è§’åº¦', severity: 'medium' as const},
    {word: 'å±‚é¢', fix: 'æ–¹é¢', severity: 'medium' as const},
    {word: 'è§†è§’', fix: 'è§’åº¦/çœ‹æ³•', severity: 'medium' as const},
    {word: 'æ ¼å±€', fix: 'çœ¼ç•Œ/æ°”åº¦', severity: 'medium' as const},
    {word: 'ç”Ÿæ€', fix: 'ç¯å¢ƒ/ç³»ç»Ÿ', severity: 'medium' as const},
    {word: 'ä½“ç³»', fix: 'ç³»ç»Ÿ', severity: 'low' as const},
    {word: 'æœºåˆ¶', fix: 'æ–¹æ³•/åˆ¶åº¦', severity: 'medium' as const},
    {word: 'æ–°èµ›é“', fix: 'æ–°é¢†åŸŸ', severity: 'high' as const},
    {word: 'æ–°è“æµ·', fix: 'æ–°å¸‚åœº', severity: 'high' as const},
    {word: 'æ–°å¼•æ“', fix: 'æ–°åŠ¨åŠ›', severity: 'high' as const},
    {word: 'æ–°åŠ¨èƒ½', fix: 'æ–°åŠ¨åŠ›', severity: 'high' as const},
    {word: 'æ–°èŒƒå¼', fix: 'æ–°æ¨¡å¼', severity: 'high' as const},
    {word: 'æ–°è·¯å¾„', fix: 'æ–°æ–¹æ³•', severity: 'high' as const},
  ];

  // æ£€æµ‹è¿‡åº¦ä¿®é¥° - å½¢å®¹è¯å †ç Œ
  const excessiveModifiers = [
    {regex: /æå…¶é‡è¦/g, type: 'è¿‡åº¦ä¿®é¥°', fix: 'é‡è¦/å¾ˆå…³é”®', severity: 'medium' as const},
    {regex: /ååˆ†å…³é”®/g, type: 'è¿‡åº¦ä¿®é¥°', fix: 'å…³é”®/å¾ˆé‡è¦', severity: 'medium' as const},
    {regex: /éå¸¸å¿…è¦/g, type: 'è¿‡åº¦ä¿®é¥°', fix: 'å¿…è¦/éœ€è¦', severity: 'medium' as const},
    {regex: /ç›¸å½“é‡è¦/g, type: 'è¿‡åº¦ä¿®é¥°', fix: 'é‡è¦', severity: 'medium' as const},
    {regex: /æ„ˆå‘/g, type: 'è¶‹åŠ¿å¥—è¯', fix: 'è¶Šæ¥è¶Š', severity: 'low' as const},
    {regex: /æ—¥ç›Š/g, type: 'è¶‹åŠ¿å¥—è¯', fix: 'è¶Šæ¥è¶Š', severity: 'low' as const},
    {regex: /é€æ¸/g, type: 'è¶‹åŠ¿å¥—è¯', fix: 'æ…¢æ…¢', severity: 'low' as const},
  ];

  // æ£€æµ‹é¢„æµ‹æ€§è¯­è¨€ - è™šå‡ç¡®å®šæ€§
  const predictivePatterns = [
    {regex: /å¯ä»¥é¢„è§/g, type: 'é¢„æµ‹å¥—è¯', fix: 'å¯èƒ½/æˆ‘è§‰å¾—', severity: 'high' as const},
    {regex: /ä¸éš¾æƒ³è±¡/g, type: 'é¢„æµ‹å¥—è¯', fix: 'å¯èƒ½/ä¹Ÿè®¸', severity: 'high' as const},
    {regex: /å¯æƒ³è€ŒçŸ¥/g, type: 'é¢„æµ‹å¥—è¯', fix: 'å¯èƒ½', severity: 'high' as const},
    {regex: /å¿…å°†/g, type: 'ç¡®å®šé¢„æµ‹', fix: 'å¯èƒ½ä¼š/å¤§æ¦‚ç‡ä¼š', severity: 'high' as const},
    {regex: /åŠ¿å¿…/g, type: 'ç¡®å®šé¢„æµ‹', fix: 'å¯èƒ½ä¼š', severity: 'high' as const},
    {regex: /æ‰€è°“.*?å°±æ˜¯æŒ‡/g, type: 'å®šä¹‰å¥—è¯', fix: 'ç›´æ¥è§£é‡Š', severity: 'medium' as const},
    {regex: /çš„æœ¬è´¨åœ¨äº/g, type: 'æœ¬è´¨å¥—è¯', fix: 'ä¸»è¦æ˜¯/å…³é”®æ˜¯', severity: 'medium' as const},
    {regex: /ä».*?çš„è§’åº¦è€Œè¨€/g, type: 'è§’åº¦å¥—è¯', fix: 'ä»...æ¥çœ‹', severity: 'medium' as const},
  ];

  // æ£€æµ‹ç»“æ„æ¨¡å¼åŒ– - æœºæ¢°ç»“æ„
  const structuralPatterns = [
    {regex: /é¦–å…ˆ.*?å…¶æ¬¡.*?æœ€å/g, type: 'é¡ºåºç»“æ„', fix: 'æ‰“ä¹±é¡ºåº,è‡ªç„¶è¿‡æ¸¡', severity: 'high' as const},
    {regex: /ç¬¬ä¸€.*?ç¬¬äºŒ.*?ç¬¬ä¸‰/g, type: 'ç¼–å·ç»“æ„', fix: 'åˆ é™¤ç¼–å·,ç›´æ¥è¯´', severity: 'high' as const},
    {regex: /ä¸€æ–¹é¢.*?å¦ä¸€æ–¹é¢/g, type: 'å¯¹ç«‹ç»“æ„', fix: 'å¯ä»¥ä¿ç•™,ä½†ä¸è¦å¤ªå·¥æ•´', severity: 'low' as const},
  ];

  // æ‰§è¡Œæ£€æµ‹ - å¯¹æ¯”è½¬æŠ˜å¥å¼
  contrastPatterns.forEach(p => {
    const matches = text.match(p.regex);
    if (matches) {
      matches.forEach(m => {
        patterns.push({type: p.type, found: m, suggestion: p.fix, severity: p.severity});
        aiScore += p.severity === 'high' ? 15 : p.severity === 'medium' ? 10 : 5;
      });
    }
  });

  // æ‰§è¡Œæ£€æµ‹ - å¥—è¯
  clichePatterns.forEach(p => {
    const matches = text.match(p.regex);
    if (matches) {
      matches.forEach(m => {
        patterns.push({type: p.type, found: m, suggestion: p.fix, severity: p.severity});
        aiScore += p.severity === 'high' ? 12 : 8;
      });
    }
  });

  // æ‰§è¡Œæ£€æµ‹ - ä¹¦é¢è¯æ±‡
  formalWords.forEach(w => {
    const regex = new RegExp(w.word, 'g');
    const matches = text.match(regex);
    if (matches) {
      matches.forEach(m => {
        patterns.push({type: 'ä¹¦é¢è¯æ±‡', found: m, suggestion: w.fix, severity: w.severity});
        aiScore += w.severity === 'high' ? 10 : w.severity === 'medium' ? 6 : 3;
      });
    }
  });

  // æ‰§è¡Œæ£€æµ‹ - æŠ½è±¡è¯æ±‡
  abstractWords.forEach(w => {
    const regex = new RegExp(w.word, 'g');
    const matches = text.match(regex);
    if (matches) {
      matches.forEach(m => {
        patterns.push({type: 'æŠ½è±¡æ¦‚å¿µ', found: m, suggestion: w.fix, severity: w.severity});
        aiScore += w.severity === 'high' ? 8 : w.severity === 'medium' ? 5 : 2;
      });
    }
  });

  // æ‰§è¡Œæ£€æµ‹ - è¿‡åº¦ä¿®é¥°
  excessiveModifiers.forEach(p => {
    const matches = text.match(p.regex);
    if (matches) {
      matches.forEach(m => {
        patterns.push({type: p.type, found: m, suggestion: p.fix, severity: p.severity});
        let score = 0;
        if (p.severity === 'medium') score = 5;
        else if (p.severity === 'low') score = 2;
        else score = 8; // é»˜è®¤é«˜åˆ†
        aiScore += score;
      });
    }
  });

  // æ‰§è¡Œæ£€æµ‹ - é¢„æµ‹æ€§è¯­è¨€
  predictivePatterns.forEach(p => {
    const matches = text.match(p.regex);
    if (matches) {
      matches.forEach(m => {
        patterns.push({type: p.type, found: m, suggestion: p.fix, severity: p.severity});
        aiScore += p.severity === 'high' ? 10 : 6;
      });
    }
  });

  // æ‰§è¡Œæ£€æµ‹ - ç»“æ„æ¨¡å¼åŒ–
  structuralPatterns.forEach(p => {
    const matches = text.match(p.regex);
    if (matches) {
      matches.forEach(m => {
        patterns.push({type: p.type, found: m, suggestion: p.fix, severity: p.severity});
        aiScore += p.severity === 'high' ? 15 : 5;
      });
    }
  });

  // æ£€æµ‹å¥å¼é•¿åº¦ä¸€è‡´æ€§ - AIç‰¹å¾
  const sentences = text.split(/[ã€‚ï¼ï¼Ÿï¼›]/g).filter(s => s.trim().length > 5);
  if (sentences.length > 5) {
    const lengths = sentences.map(s => s.length);
    const avgLength = lengths.reduce((a, b) => a + b, 0) / lengths.length;
    const variance = lengths.reduce((sum, len) => sum + Math.pow(len - avgLength, 2), 0) / lengths.length;

    // å¦‚æœæ–¹å·®å¾ˆå°,è¯´æ˜å¥å¼è¿‡äºä¸€è‡´
    if (variance < 50) {
      patterns.push({
        type: 'å¥å¼ä¸€è‡´æ€§',
        found: 'å¥å­é•¿åº¦è¿‡äºä¸€è‡´',
        suggestion: 'æ•…æ„åˆ¶é€ é•¿çŸ­å¥å˜åŒ–',
        severity: 'medium'
      });
      aiScore += 10;
    }
  }

  // æ£€æµ‹æ®µè½ç»“æ„å¯¹ç§°æ€§
  const paragraphs = text.split(/\n\n/g).filter(p => p.trim().length > 20);
  if (paragraphs.length > 3) {
    const paraLengths = paragraphs.map(p => p.split(/[ã€‚ï¼ï¼Ÿï¼›]/g).length);
    const avgParaLength = paraLengths.reduce((a, b) => a + b, 0) / paraLengths.length;

    // å¦‚æœæ¯æ®µå¥å­æ•°å¤ªæ¥è¿‘,å¯èƒ½æ˜¯æœºæ¢°ç»“æ„
    const tooUniform = paraLengths.every(len => Math.abs(len - avgParaLength) <= 1);
    if (tooUniform && paragraphs.length > 3) {
      patterns.push({
        type: 'æ®µè½å¯¹ç§°æ€§',
        found: 'æ®µè½ç»“æ„è¿‡äºå¯¹ç§°',
        suggestion: 'æ•…æ„æ‰“ç ´æ®µè½é•¿åº¦ä¸€è‡´æ€§',
        severity: 'high'
      });
      aiScore += 15;
    }
  }

  // ç”Ÿæˆæ”¹è¿›å»ºè®®
  const recommendations: string[] = [];

  if (patterns.some(p => p.type.includes('å¯¹æ¯”å¥å¼'))) {
    recommendations.push('æ‹†è§£å¯¹æ¯”è½¬æŠ˜å¥å¼ï¼Œç”¨æ›´è‡ªç„¶çš„è¡¨è¾¾æ–¹å¼');
  }

  if (patterns.some(p => p.type.includes('å¥—è¯'))) {
    recommendations.push('åˆ é™¤æ‰€æœ‰å¥—è¯ï¼Œç›´æ¥è¯´é‡ç‚¹');
  }

  if (patterns.some(p => p.type.includes('ä¹¦é¢è¯æ±‡'))) {
    recommendations.push('ç”¨æ—¥å¸¸å¤§ç™½è¯æ›¿æ¢ä¹¦é¢åŒ–è¯æ±‡');
  }

  if (patterns.some(p => p.type.includes('æŠ½è±¡æ¦‚å¿µ'))) {
    recommendations.push('å°†æŠ½è±¡æ¦‚å¿µè½¬åŒ–ä¸ºå…·ä½“çš„ç”Ÿæ´»åœºæ™¯');
  }

  if (patterns.filter(p => p.severity === 'high').length > 3) {
    recommendations.push('AIç—•è¿¹è¾ƒé‡ï¼Œéœ€è¦æ·±åº¦é‡å†™');
  }

  // è®¡ç®—äººç±»å†™ä½œæ¦‚ç‡
  const humanProbability = Math.max(0, Math.min(100, 100 - aiScore));

  return {
    patterns,
    score: Math.max(0, 100 - aiScore),
    humanProbability,
    recommendations
  };
}

// æ–°å¢ï¼šè§‚ç‚¹ä¸€è‡´æ€§æ£€æŸ¥å™¨
export function checkConsistency(
  newArticle: string,
  previousArticles: string[]
): {
  conflicts: Array<{topic: string; previous: string; current: string}>;
  suggestions: string[];
} {
  // è¿™é‡Œå®ç°è§‚ç‚¹å¯¹æ¯”é€»è¾‘
  // æ£€æŸ¥æ˜¯å¦æœ‰å®Œå…¨ç›¸åçš„è§‚ç‚¹
  // æä¾›å…³è”å’Œå‘¼åº”çš„å»ºè®®

  // TODO: å®ç°è§‚ç‚¹ä¸€è‡´æ€§æ£€æŸ¥é€»è¾‘
  // æš‚æ—¶é¿å…æœªä½¿ç”¨å‚æ•°è­¦å‘Š
  console.log('æ£€æŸ¥æ–‡ç« ä¸€è‡´æ€§:', newArticle.length, 'ä¸ªå­—ç¬¦');
  console.log('å¯¹æ¯”æ–‡ç« æ•°é‡:', previousArticles.length);

  return {
    conflicts: [],
    suggestions: []
  };
}

// æ–°å¢ï¼šåœºæ™¯åŒ–è½¬æ¢å™¨
export function abstractToScenario(abstract: string): string {
  const scenarios = {
    'æå‡æ•ˆç‡': 'åŸæ¥éœ€è¦3å°æ—¶çš„å·¥ä½œï¼Œç°åœ¨1å°æ—¶æå®š',
    'é™ä½æˆæœ¬': 'æ¯æœˆèƒ½çœä¸‹500å—',
    'ç”¨æˆ·ä½“éªŒ': 'ç”¨æˆ·è¯´"ç»ˆäºæ‰¾åˆ°æƒ³è¦çš„äº†"',
    'æŠ€æœ¯åˆ›æ–°': 'ä»¥å‰åšä¸åˆ°çš„äº‹ï¼Œç°åœ¨èƒ½åšäº†',
    'æ•°æ®å®‰å…¨': 'ä¸ç”¨æ‹…å¿ƒä¿¡æ¯æ³„éœ²',
    'æ™ºèƒ½æ¨è': 'å®ƒå±…ç„¶çŸ¥é“æˆ‘æƒ³è¦ä»€ä¹ˆ',
  };

  // åŒ¹é…å¹¶è½¬æ¢
  let result = abstract;
  Object.entries(scenarios).forEach(([key, value]) => {
    if (abstract.includes(key)) {
      result = result.replace(key, value);
    }
  });

  return result;
}

// è¾…åŠ©å‡½æ•°:è·å–é£æ ¼æŒ‡å—
export function getStyleGuide(style: string): string {
  const styleGuides: Record<string, string> = {
    professional: "ä¸“ä¸šä¸¥è°¨,é€»è¾‘æ¸…æ™°,æ•°æ®æ”¯æ’‘,é€‚åˆèŒåœºäººå£«é˜…è¯»",
    casual: "è½»æ¾æ´»æ³¼,é€šä¿—æ˜“æ‡‚,è´´è¿‘ç”Ÿæ´»,é€‚åˆå¤§ä¼—é˜…è¯»",
    storytelling: "æ•…äº‹åŒ–å™è¿°,æƒ…èŠ‚ç”ŸåŠ¨,å¼•äººå…¥èƒœ,é€‚åˆæ·±åº¦é˜…è¯»",
    xiaohongshu: "å°çº¢ä¹¦é£æ ¼,è½»æ¾æœ‰è¶£,emojiä¸°å¯Œ,äº’åŠ¨æ€§å¼º",
    wechat: "å…¬ä¼—å·é£æ ¼,æ·±åº¦ä¸“ä¸š,é€»è¾‘ä¸¥å¯†,æ•°æ®å……åˆ†",
  };

  return styleGuides[style] || styleGuides.professional;
}

// è¾…åŠ©å‡½æ•°:è·å–å­—æ•°è¦æ±‚
export function getWordCount(length: string): string {
  const wordCounts: Record<string, string> = {
    mini: "500-800å­—",
    short: "1000-1500å­—",
    medium: "2000-3000å­—",
    long: "3000-5000å­—",
    xiaohongshu: "500-1000å­—",
    wechat: "2000-4000å­—",
  };

  return wordCounts[length] || wordCounts.medium;
}

// æ–°å¢ï¼šæ–‡ç« åå¤„ç†å™¨ - æ·±åº¦å»AIåŒ–
export function postProcessContent(content: string): {
  processed: string;
  changes: Array<{type: string; before: string; after: string}>
} {
  const changes: Array<{type: string; before: string; after: string}> = [];
  let processed = content;

  // 1. æ›¿æ¢AIé«˜é¢‘è¯æ±‡
  const wordReplacements = [
    {before: 'åœ¨å½“ä»Šæ—¶ä»£', after: 'è¯´å®è¯', type: 'å¥—è¯æ›¿æ¢'},
    {before: 'éšç€...å‘å±•', after: 'è¿™ä¸¤å¹´æˆ‘å‘ç°', type: 'å¥—è¯æ›¿æ¢'},
    {before: 'ç»¼ä¸Šæ‰€è¿°', after: 'è¯´ç‚¹å®åœ¨çš„', type: 'å¥—è¯æ›¿æ¢'},
    {before: 'æ€»è€Œè¨€ä¹‹', after: 'è¯´ç™½äº†', type: 'å¥—è¯æ›¿æ¢'},
    {before: 'ç”±æ­¤å¯è§', after: 'ä½ çœ‹', type: 'å¥—è¯æ›¿æ¢'},
    {before: 'ä¸éš¾çœ‹å‡º', after: 'å…¶å®', type: 'å¥—è¯æ›¿æ¢'},
    {before: 'æ˜¾è€Œæ˜“è§', after: 'è¯´å®è¯', type: 'å¥—è¯æ›¿æ¢'},
    {before: 'æ¯‹åº¸ç½®ç–‘', after: 'æˆ‘è§‰å¾—', type: 'å¥—è¯æ›¿æ¢'},
    {before: 'ä¼—æ‰€å‘¨çŸ¥', after: 'å¾ˆå¤šäººéƒ½çŸ¥é“', type: 'å¥—è¯æ›¿æ¢'},
    {before: 'å€¼å¾—æ³¨æ„çš„æ˜¯', after: 'æœ‰æ„æ€çš„æ˜¯', type: 'å¥—è¯æ›¿æ¢'},
    {before: 'å½°æ˜¾', after: 'æ˜¾ç¤º', type: 'ä¹¦é¢è¯­æ›¿æ¢'},
    {before: 'å‡¸æ˜¾', after: 'çªå‡º', type: 'ä¹¦é¢è¯­æ›¿æ¢'},
    {before: 'èµ‹èƒ½', after: 'å¸®åŠ©', type: 'ä¹¦é¢è¯­æ›¿æ¢'},
    {before: 'åŠ©åŠ›', after: 'æ¨åŠ¨', type: 'ä¹¦é¢è¯­æ›¿æ¢'},
    {before: 'èµ‹äºˆ', after: 'ç»™', type: 'ä¹¦é¢è¯­æ›¿æ¢'},
    {before: 'å‘ˆç°', after: 'å±•ç°', type: 'ä¹¦é¢è¯­æ›¿æ¢'},
    {before: 'è¯¸å¦‚', after: 'æ¯”å¦‚', type: 'ä¹¦é¢è¯­æ›¿æ¢'},
    {before: 'é‰´äº', after: 'å› ä¸º', type: 'ä¹¦é¢è¯­æ›¿æ¢'},
    {before: 'åŸºäº', after: 'æ ¹æ®', type: 'ä¹¦é¢è¯­æ›¿æ¢'},
    {before: 'è—‰æ­¤', after: 'é€šè¿‡', type: 'ä¹¦é¢è¯­æ›¿æ¢'},
    {before: 'ä¹ƒè‡³', after: 'ç”šè‡³', type: 'ä¹¦é¢è¯­æ›¿æ¢'},
    {before: 'äº¦æˆ–æ˜¯', after: 'æˆ–è€…', type: 'ä¹¦é¢è¯­æ›¿æ¢'},
    {before: 'æŠ‘æˆ–æ˜¯', after: 'æˆ–è€…', type: 'ä¹¦é¢è¯­æ›¿æ¢'},
    {before: 'ç»´åº¦', after: 'æ–¹é¢', type: 'æŠ½è±¡æ¦‚å¿µæ›¿æ¢'},
    {before: 'å±‚é¢', after: 'æ–¹é¢', type: 'æŠ½è±¡æ¦‚å¿µæ›¿æ¢'},
    {before: 'è§†è§’', after: 'è§’åº¦', type: 'æŠ½è±¡æ¦‚å¿µæ›¿æ¢'},
    {before: 'æ ¼å±€', after: 'çœ¼ç•Œ', type: 'æŠ½è±¡æ¦‚å¿µæ›¿æ¢'},
    {before: 'ç”Ÿæ€', after: 'ç¯å¢ƒ', type: 'æŠ½è±¡æ¦‚å¿µæ›¿æ¢'},
    {before: 'ä½“ç³»', after: 'ç³»ç»Ÿ', type: 'æŠ½è±¡æ¦‚å¿µæ›¿æ¢'},
    {before: 'æœºåˆ¶', after: 'æ–¹æ³•', type: 'æŠ½è±¡æ¦‚å¿µæ›¿æ¢'},
    {before: 'æ–°èµ›é“', after: 'æ–°é¢†åŸŸ', type: 'æŠ½è±¡æ¦‚å¿µæ›¿æ¢'},
    {before: 'æ–°è“æµ·', after: 'æ–°å¸‚åœº', type: 'æŠ½è±¡æ¦‚å¿µæ›¿æ¢'},
    {before: 'æ–°å¼•æ“', after: 'æ–°åŠ¨åŠ›', type: 'æŠ½è±¡æ¦‚å¿µæ›¿æ¢'},
    {before: 'æ–°åŠ¨èƒ½', after: 'æ–°åŠ¨åŠ›', type: 'æŠ½è±¡æ¦‚å¿µæ›¿æ¢'},
    {before: 'æ–°èŒƒå¼', after: 'æ–°æ¨¡å¼', type: 'æŠ½è±¡æ¦‚å¿µæ›¿æ¢'},
    {before: 'æ–°è·¯å¾„', after: 'æ–°æ–¹æ³•', type: 'æŠ½è±¡æ¦‚å¿µæ›¿æ¢'},
  ];

  wordReplacements.forEach(replacement => {
    const regex = new RegExp(replacement.before, 'g');
    if (processed.match(regex)) {
      processed = processed.replace(regex, replacement.after);
      changes.push(replacement);
    }
  });

  // 2. æ‹†è§£å¯¹æ¯”è½¬æŠ˜å¥å¼
  const contrastPatterns = [
    {before: /ä¸æ˜¯(.*?)[ï¼Œ,]æ˜¯(.*?)[ã€‚ï¼ï¼Ÿ]/g, after: 'æˆ‘è§‰å¾—$1ï¼Œå…¶å®$2', type: 'å¥å¼æ‹†è§£'},
    {before: /ä¸æ˜¯(.*?)[ï¼Œ,]è€Œæ˜¯(.*?)[ã€‚ï¼ï¼Ÿ]/g, after: 'å¾ˆå¤šäººä»¥ä¸º$1ï¼Œä½†å®é™…æƒ…å†µæ˜¯$2', type: 'å¥å¼æ‹†è§£'},
    {before: /ä¸åœ¨äº(.*?)[ï¼Œ,]è€Œåœ¨äº(.*?)[ã€‚ï¼ï¼Ÿ]/g, after: 'é‡ç‚¹ä¸æ˜¯$1ï¼ŒçœŸæ­£å…³é”®çš„æ˜¯$2', type: 'å¥å¼æ‹†è§£'},
    {before: /é‡è¦çš„ä¸æ˜¯(.*?)[ï¼Œ,]è€Œæ˜¯(.*?)[ã€‚ï¼ï¼Ÿ]/g, after: 'åˆ«æ€¥ç€å…³æ³¨$1ï¼Œå…ˆæƒ³æƒ³$2', type: 'å¥å¼æ‹†è§£'},
  ];

  contrastPatterns.forEach(pattern => {
    const matches = processed.match(pattern.before);
    if (matches) {
      processed = processed.replace(pattern.before, pattern.after);
      matches.forEach(match => {
        changes.push({type: pattern.type, before: match, after: match.replace(pattern.before, pattern.after)});
      });
    }
  });

  // 3. æ·»åŠ å£è¯­åŒ–è¡¨è¾¾
  const colloquialAdditions = [
    {pattern: /ã€‚/g, after: 'ã€‚è¯´å®è¯', chance: 0.1, type: 'å£è¯­åŒ–å¢å¼º'},
    {pattern: /ï¼Œ/g, after: 'ï¼Œä½ æƒ³æƒ³çœ‹', chance: 0.05, type: 'å£è¯­åŒ–å¢å¼º'},
    {pattern: /[ã€‚ï¼ï¼Ÿ]/g, after: 'ï¼Œæˆ‘è§‰å¾—', chance: 0.08, type: 'å£è¯­åŒ–å¢å¼º'},
  ];

  colloquialAdditions.forEach(addition => {
    if (Math.random() < addition.chance) {
      const matches = processed.match(addition.pattern);
      if (matches) {
        const randomMatch = matches[Math.floor(Math.random() * matches.length)];
        processed = processed.replace(randomMatch, randomMatch + addition.after);
        changes.push({type: addition.type, before: randomMatch, after: randomMatch + addition.after});
      }
    }
  });

  // 4. åˆ¶é€ è¯­è¨€ä¸å®Œç¾æ„Ÿ
  const imperfections = [
    {pattern: /ã€‚/g, after: '...', chance: 0.03, type: 'ä¸å®Œç¾æ„Ÿ'},
    {pattern: /ï¼Œ/g, after: 'â€”â€”', chance: 0.02, type: 'ä¸å®Œç¾æ„Ÿ'},
    {pattern: /[ã€‚ï¼ï¼Ÿ]/g, after: '", "å—¯..."', chance: 0.01, type: 'ä¸å®Œç¾æ„Ÿ'},
  ];

  imperfections.forEach(imperfection => {
    if (Math.random() < imperfection.chance) {
      const sentences = processed.split(imperfection.pattern);
      if (sentences.length > 2) {
        const randomIndex = Math.floor(Math.random() * (sentences.length - 1));
        sentences[randomIndex] += imperfection.after;
        const separator = imperfection.pattern.source === '[ã€‚ï¼ï¼Ÿ]' ? '' : imperfection.pattern.source.replace(/\\/g, '');
        const newProcessed = sentences.join(separator);
        if (newProcessed !== processed) {
          changes.push({type: imperfection.type, before: processed, after: newProcessed});
          processed = newProcessed;
        }
      }
    }
  });

  // 5. æ·»åŠ çœŸå®æ„Ÿç»†èŠ‚
  const realDetails = [
    'å‰å‡ å¤©',
    'ä¸Šå‘¨å…­ä¸‹åˆ',
    'æ˜¨å¤©åˆ·æ‰‹æœºçœ‹åˆ°',
    'æ—©ä¸Š9ç‚¹çš„åŠå…¬å®¤',
    'åœ°é“ä¸Šå¬åˆ°',
    'å’–å•¡åº—é‡Œçœ‹åˆ°',
    'èŠ±äº†89å—',
    'è¯•äº†3æ¬¡æ‰æˆåŠŸ',
    'ç”¨äº†2å‘¨æ„Ÿè§‰',
    'å‘¨äºŒä¸‹åˆ3ç‚¹',
  ];

  // éšæœºæ’å…¥ä¸€äº›çœŸå®ç»†èŠ‚
  if (Math.random() < 0.3) {
    const detail = realDetails[Math.floor(Math.random() * realDetails.length)];
    const sentences = processed.split('ã€‚');
    if (sentences.length > 2) {
      const randomIndex = Math.floor(Math.random() * (sentences.length - 1)) + 1;
      sentences[randomIndex] = detail + 'ï¼Œ' + sentences[randomIndex];
      const newProcessed = sentences.join('ã€‚');
      changes.push({type: 'çœŸå®ç»†èŠ‚', before: processed, after: newProcessed});
      processed = newProcessed;
    }
  }

  return {
    processed,
    changes
  };
}

// æ–°å¢ï¼šå†…å®¹è´¨é‡è¯„ä¼°å™¨
export function evaluateContentQuality(content: string): {
  readability: number;
  humanScore: number;
  aiPatterns: number;
  aiScore: number;
  suggestions: string[];
} {
  const aiDetection = detectAIPatterns(content);
  const patterns = aiDetection.patterns;

  // å¯è¯»æ€§è¯„åˆ† (0-100)
  const sentences = content.split(/[ã€‚ï¼ï¼Ÿï¼›]/g).filter(s => s.trim().length > 5);
  const avgSentenceLength = sentences.reduce((sum, s) => sum + s.length, 0) / sentences.length;
  const readability = Math.max(0, Math.min(100, 100 - Math.abs(avgSentenceLength - 25) * 2));

  // AIæ¨¡å¼è¯„åˆ† (0-100, è¶Šä½è¶Šå¥½)
  const aiPatterns = patterns.length;
  const aiScore = Math.max(0, 100 - aiPatterns * 5);

  // äººç±»å†™ä½œè¯„åˆ†
  const humanScore = aiDetection.humanProbability;

  // å»ºè®®
  const suggestions: string[] = [];

  if (patterns.some(p => p.severity === 'high')) {
    suggestions.push('å­˜åœ¨ä¸¥é‡AIç—•è¿¹ï¼Œéœ€è¦æ·±åº¦é‡å†™');
  }

  if (readability < 70) {
    suggestions.push('å¥å­è¿‡é•¿æˆ–è¿‡çŸ­ï¼Œéœ€è¦è°ƒæ•´å¥å¼');
  }

  if (humanScore < 80) {
    suggestions.push('äººç±»å†™ä½œç‰¹å¾ä¸è¶³ï¼Œå»ºè®®å¢åŠ å£è¯­åŒ–è¡¨è¾¾');
  }

  if (patterns.filter(p => p.type.includes('å¥—è¯')).length > 2) {
    suggestions.push('å¥—è¯è¿‡å¤šï¼Œéœ€è¦åˆ é™¤');
  }

  return {
    readability: Math.round(readability),
    humanScore: Math.round(humanScore),
    aiPatterns,
    aiScore: Math.round(aiScore),
    suggestions
  };
}

// è¾…åŠ©å‡½æ•°:è·å–å¹³å°åç§°
export function getPlatformName(style: string): string {
  if (style === "casual" || style === "xiaohongshu") {
    return "å°çº¢ä¹¦";
  }
  return "å…¬ä¼—å·";
}

// å›¾ç‰‡æç¤ºè¯ç”Ÿæˆæ¨¡æ¿
export const imagePrompts = {
  /**
   * æ ¹æ®æ–‡ç« å†…å®¹ç”Ÿæˆå›¾ç‰‡æç¤ºè¯
   */
  generateImagePrompts: (params: {
    articleTitle: string;
    articleContent: string;
    imageCount: number;
    platform: string;
  }) => `ä½ æ˜¯ä¸“ä¸šçš„AIç»˜ç”»æç¤ºè¯ç”Ÿæˆä¸“å®¶ã€‚è¯·æ ¹æ®æ–‡ç« å†…å®¹ç”Ÿæˆ${params.imageCount}ä¸ªé«˜è´¨é‡çš„å›¾ç‰‡ç”Ÿæˆæç¤ºè¯ã€‚

## æ–‡ç« æ ‡é¢˜
${params.articleTitle}

## æ–‡ç« å†…å®¹ï¼ˆå‰1000å­—ï¼‰
${params.articleContent.substring(0, 1000).replace(/<[^>]*>/g, '')}

## å¹³å°ç‰¹æ€§
${params.platform === "xiaohongshu"
  ? "å°çº¢ä¹¦å¹³å° - æ¸…æ–°æ—¶å°šã€ç”Ÿæ´»åŒ–ã€è‰²å½©æ˜äº®ã€æ„å›¾ç®€æ´"
  : "å…¬ä¼—å·å¹³å° - ä¸“ä¸šå•†åŠ¡ã€ç®€æ´å¤§æ°”ã€é…è‰²æ²‰ç¨³ã€ä¿¡æ¯å›¾è¡¨é£æ ¼"}

## æç¤ºè¯è¦æ±‚
1. **å†…å®¹ç›¸å…³æ€§**ï¼šæ¯ä¸ªæç¤ºè¯è¦ä¸æ–‡ç« çš„å…·ä½“ç« èŠ‚å†…å®¹ç´§å¯†ç›¸å…³
2. **è§†è§‰è¡¨ç°åŠ›**ï¼šå…·ä½“ã€å½¢è±¡ã€å¯Œæœ‰ç”»é¢æ„Ÿï¼Œé¿å…æŠ½è±¡æ¦‚å¿µ
3. **æŠ€æœ¯è§„èŒƒ**ï¼š
   - ä½¿ç”¨è‹±æ–‡æè¿°
   - åŒ…å«ï¼šä¸»ä½“ + é£æ ¼ + å…‰çº¿ + æ„å›¾ + è´¨é‡æè¿°
   - é•¿åº¦ï¼š30-80ä¸ªå•è¯
4. **é£æ ¼ç»Ÿä¸€**ï¼šæ‰€æœ‰å›¾ç‰‡ä¿æŒç»Ÿä¸€çš„è§†è§‰é£æ ¼
5. **å†…å®¹é™åˆ¶**ï¼š
   - âŒ é¿å…ï¼šäººè„¸ç‰¹å†™ã€æ–‡å­—å†…å®¹ã€æ•æ„Ÿä¸»é¢˜
   - âœ… æ¨èï¼šåœºæ™¯æ’å›¾ã€æ¦‚å¿µå›¾ã€æŠ½è±¡å›¾å½¢ã€å›¾æ ‡ç»„åˆ

## é£æ ¼å‚è€ƒæ¨¡æ¿
${params.platform === "xiaohongshu"
  ? `**å°çº¢ä¹¦é£æ ¼ç¤ºä¾‹ï¼š**
- "modern lifestyle illustration, bright pastel colors, minimalist composition, soft lighting, clean background, instagram aesthetic, high quality"
- "trendy flat design illustration, vibrant colors, simple shapes, modern icons, professional infographic style, 4k quality"`
  : `**å…¬ä¼—å·é£æ ¼ç¤ºä¾‹ï¼š**
- "professional business illustration, clean corporate style, blue and white color scheme, modern minimal design, soft shadows, high quality"
- "technology concept illustration, abstract geometric shapes, gradient background, modern infographic style, professional look, 4k quality"`}

## è¾“å‡ºæ ¼å¼
è¯·ä¸¥æ ¼æŒ‰ç…§JSONæ•°ç»„æ ¼å¼è¿”å›ï¼Œæ¯ä¸ªæç¤ºè¯å¯¹åº”æ–‡ç« çš„ä¸€ä¸ªç« èŠ‚æˆ–è¦ç‚¹ï¼š

\`\`\`json
[
  "detailed prompt 1 for first section, professional illustration, clean style, soft lighting, high quality, 4k",
  "detailed prompt 2 for second section, modern design, minimalist composition, vibrant colors, professional, 4k",
  "detailed prompt 3 for third section, abstract concept, geometric shapes, gradient background, high quality"
]
\`\`\`

æ³¨æ„äº‹é¡¹ï¼š
- æ•°ç»„é•¿åº¦å¿…é¡»æ˜¯${params.imageCount}ä¸ª
- æ¯ä¸ªæç¤ºè¯ç‹¬ç«‹å®Œæ•´ï¼Œä¸è¦æœ‰åºå·
- ä½¿ç”¨çº¯è‹±æ–‡ï¼Œé¿å…ä¸­æ–‡å­—ç¬¦
- ç¡®ä¿æç¤ºè¯å¯ä»¥ç›´æ¥ç”¨äºAIç»˜ç”»ç”Ÿæˆ`,
};
